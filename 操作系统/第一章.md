# 第一章 操作系统引论
## 1.1 操作系统的目标和作用
### 1.1.1 操作系统的目标
1. 方便性
2. 有效性
3. 可扩充性
4. 开放性
### 1.1.2 操作系统的作用
1. OS作为用户与计算机应将系统之间的接口  
    含义：OS处于用户与计算机硬件系统之间，用户通过OS来使用计算机系统  
    用户通过**命令方式**、**系统调用方式**、**图标-窗口方式**来实现与操作系统的通信
2. OS作为计算机系统资源的管理者  
    资源类别：处理机、存储器、I/O设备、文件  
    处理机管理：用于分配和控制处理机  
    存储器管理：负责内存的分配与回收  
    I/O设备管理：负责I/O设备的分配与操纵  
    文件管理：用于实现对文件的存取、共享、保护
3. OS实现对计算机资源的抽象  
    通过I/O软件隐藏I/O对于硬件接口的操作细节  
    覆盖了I/O软件的机器成为扩充机器或虚机器  
    I/O软件上覆盖文件管理软件，文件管理软件覆盖窗口软件  
    OS时铺设在计算机硬件上的多层软件的集合
### 1.1.3推动操作系统发展的主要动力
1. 不断提高的计算机资源利用率
2. 方便用户
3. 器件的不断更新迭代
4. 计算机体系结构的不断发展
5. 不断提出新的应用需求
## 1.2操作系统的发展过程
### 1.2.1未配置操作系统的计算机系统
1. 人工操作方式：  
    缺点：  
    1.用户独占全机  
    2.CPU等待人工操作  
    人工操作方式严重降低了计算机资源的利用率，产生了人机矛盾，
    CPU与I/O设备的速度不匹配。  
    为解决人机矛盾，产生了通道技术、缓冲技术，不能理想解决。

2. 脱机输入/输出(Off-Line I/O)方式  
    通过外围机和外存提前存储信息，CPU使用时，从外存中高速调入内存。  
    优点：  
    1.减少了CPU的空闲时间。  
    2.提高了I/O速度
### 1.2.2 单道批处理系统
1. 单道批处理系统的处理过程：  
    1.将处理的所有作业预先以脱机的方式输入到磁带。  
    2.监督程序将磁带上的第一个作业装入内存，将运行控制权交给该作业  
    3.当改作业处理完成时，控制权归还监督程序，监督程序重复1步骤，直至全部作业处理完  
    **虽然对作业的处理时成批进行的，但是内存中始终只存在一道作业**
2. 优缺点：  
    1.减少了人工操作的时间，提高机器的利用率和系统吞吐量。  
    2.系统中的资源特不到充分利用；CPU等待I/O完成后才继续运行；CPU的利用率手I/O速度的限制。
3. 特点：自动、顺序、单道
### 1.2.3 多道批处理系统
1. 基本概念：
    1.作业预先存在外存，形成后备队列
    2.作业调度程序，按照算法选择若干程序调入内存，共享CPU和系统资源。
    3.在进行I/O操作时，调度其他程序，使得CPU不空闲
2. 特点：  
    1.多道性  
    2.无序性  
    3.调度性
3. 优缺点：  
    1.资源利用率高  
    2.系统吞吐量大
    3.平均运转时间长
    4.无交互能力
4. 需要解决的问题：  
    1.处理机争用问题  
    2.内存分配和保护问题  
    3.I/O设备分配问题  
    4.文件的组织和管理问题  
    5.作业管理问题  
    6.用户与系统的接口问题  
    基于以上问题产生了操作系统。
### **操作系统的定义：**  
**操作系统是一组能够有效地组织和管理计算机硬件和软件资源，合理地对各类作业进行调度，以及方便用户使用地程序的集合**

### 1.2.4分时系统(Time Sharing System)
产生：基于需求  
    人-机交互、共享主机、便于用户上机  

**分时系统的定义**：在一台主机上连接了多个配有显示器和键盘的终端并由此锁组成的系统，该系统允许多个用户同时通过自己的终端，以交互的方式使用计算机，共享主机中的资源

基本思想：让多个用户同时通过终端使用系统，而OS则在系统内部按一定策略调度和处理用户程序。  
* 多道批处理系统和分时系统都使用了多道程序设计技术，但侧重点不同。

关键问题：  
1. 及时接收：配置多路卡，实现分时多路复用
2. 及时处理：作业直接进入内存；采用轮转运行方式


特征：多路性、独立性、及时性、交互性

### 1.2.5实时系统
定义：指系统能及时（或即时）响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。

实时操作系统的应用领域：  
有实时要求（有严格确定的时间限制）的领域（过程控制及事务处理）--多道批处理系统和分时系统不能满足

类型：（1）实时控制系统 （2）实时信息处理系统（3）多媒体系统 （4）嵌入式系统

实时任务类型：  
周期性/非周期性实时任务（截止时间）  
硬实时任务/软实时任务

实时系统与分时系统特征的比较：  
多路性、独立性、及时性、交互性、可靠性

## 1.3操作系统的基本特性
并发、共享、虚拟、异步
### 1.3.1并发
1. 基本概念  
* 指在计算机系统中同时存在着多道运行的程序（进程）  
宏观上：多道程序同时在执行  
微观上：任何时刻只有一道程序在执行，即微观上多道程序在CPU上轮流（交替）执行（单机）  
* 并行(parallel)： 与并发相似，指多道程序在同一时刻执行，但需多个硬件支持。
2. 引入进程：  
程序和进程：在多道程序系统中，程序不能独立运行，更不能和其它程序并发执行。引入进程的目的，就是为了使多个程序并发执行。  
引入线程：  
进程是OS中拥有资源并独立运行的基本单位。引入线程后，把进程作为分配资源的基本单位，把线程作为独立运行和独立调度的基本单位，进一步提高系统的并发性。
> * 程序的并发执行能有效改善系统资源的利用率，但使系统复杂化，因此操作系统必须对并发活动进行控制和管理。
> * 并发是操作系统最重要的特征，其它特征均以并发为前提。

### 1.3.2共享
指系统中的资源不再为某道程序所独占，而是供多道程序共同使用。

* 资源共享方式：  
    互斥共享方式  
    同时访问方式

* **并发和共享是操作系统的两个最基本的特征**，二者互为存在条件：  
    资源的共享是以程序（进程）的并发执行为条件。  
    程序的并发执行也以资源的共享为条件。

### 1.3.3虚拟
通过某种技术把一个物理实体映射为若干个对应的逻辑实体——分时（时分复用技术）或分空间（空分复用技术）。

虚拟是操作系统管理系统资源的重要手段，可提高资源利用率。

### 1.3.4异步
也称不确定性，指进程在执行中，其执行时间、顺序、向前推进的速度和完成的时间等都是不可预知的。

只要在OS中配置有完善的进程同步机制，且运行环境相同，作业经多次运行都会获得完全相同的结果。所以，异步运行方式是允许的，是OS的一个重要特征。

## 1.4操作系统的主要功能
处理机管理、存储器管理、设备管理、文件管理、接口管理
### 1.4.1 处理及管理功能
* 主要任务：  
    对处理机进行分配  
    对处理机运行进行有效的控制和管理

* 功能：  
    进程控制  
    进程同步  
    进程通信  
    调度 

### 1.4.2存储器管理功能
* 主要任务：  
    为多道程序的运行提供良好的环景  
    方便用户使用存储器  
    提高存储器的利用率  
    从逻辑上扩充内存 
* 功能：  
    内存分配（静态分配、动态分配）  
    内存保护  
    地址映射  
    内存扩充  

### 1.4.3 设备管理功能
* 主要任务：  
完成用户提出的I/O请求  
为用户分配I/O设备  
提高I/O设备的利用率及速度  
方便用户使用I/O设备
* 功能：  
缓冲管理  
设备分配  
设备处理  
虚拟设备

### 1.4.5文件管理功能
* 主要任务：  
对用户文件和系统文件进行管理  
方便用户使用文件  
保证文件的安全性
* 功能：  
文件存储空间的管理  
目录管理  
文件的读、写管理和保护

### 1.4.5OS与用户之间的接口
* 主要任务：方便用户使用操作系统
* 功能：  
用户接口（联机用户接口-命令方式、图形用户接口，脱机用户接口）  
程序接口（系统调用）

### 1.4.6现代操作系统的新功能
系统安全、网络的功能和服务、支持多媒体



